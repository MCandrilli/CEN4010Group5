{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\adrie\\\\Desktop\\\\CEN\\\\CEN4010Group5\\\\frontend\\\\src\\\\components\\\\shoppingcart.js\";\nimport React, { Component, useState } from 'react';\nimport { DataTable, TableHeader, Textfield } from 'react-mdl';\nimport styled from \"styled-components\";\nimport delete_logo from \"./images/delete_bin.png\";\nimport Tooltip from '@material-ui/core/Tooltip';\nconst StyledDiv = styled.div`\n    margin-left: 400px;`;\nconst StyledCoverArt = styled.img`\n    height: 150px;`;\nconst StyledDeleteButton = styled.button`\n    background: transparent;\n    border: none;`;\nconst StyledActionButton = styled.button`\n    background: transparent;\n    border-color: blue;\n    border-width: thin;\n    color: blue;\n    text-decoration: underline;`;\nconst StyledBookTite = styled.text`\n    white-space: normal;`;\nconst StyledShoppingCartTitle = styled.h3`\n    font-variant: all-petite-caps;\n    text-decoration: overline;\n    color: dimgrey;\n    font-size: 40px;\n    font-weight: lighter;\n    padding-top: 10px;`;\nconst StyledSFLTitle = styled.h3`\n    font-variant: all-petite-caps;\n    text-decoration: overline;\n    color: dimgrey;\n    font-size: 28px;\n    font-weight: lighter;`;\nconst StyledSubtotal = styled.p`\n    color: rgba(0, 0, 0, 0.54);\n    font-size: 20px;\n    text-transform: uppercase;\n    margin: unset;`;\nconst cart = [];\nconst save_for_later = [];\nconst img_url_prefix = 'https://raw.githubusercontent.com/benoitvallon/100-best-books/master/static/';\n/* Add a book to the shopping cart */\n\nconst addToCart = book => {\n  //if (book == null){return;}\n  let duplicate = findBookInCartByIndex(book._id); // Find index of possible duplicate\n\n  if (duplicate == -1) // No duplicate present\n    {\n      cart.push({\n        id: book._id,\n        img_link: book.imageLink,\n        title: book.title,\n        quantity: 1,\n        price: book.price\n      });\n    } else // Duplicate present\n    {\n      cart[duplicate].quantity++;\n    }\n\n  console.log(cart);\n};\n/* Calculate and update cart's subtotal */\n\n\nconst getSubtotal = () => {\n  let newTotal = 0;\n\n  for (const [index, book] of cart.entries()) {\n    newTotal += book.price * book.quantity;\n  }\n\n  return /*#__PURE__*/React.createElement(StyledSubtotal, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 12\n    }\n  }, \"$\", newTotal.toFixed(2));\n};\n/* \r\n    Find book in cart by book id and return the book's index if the id is found.\r\n    Otherwise, return -1\r\n*/\n\n\nconst findBookInCartByIndex = id => {\n  return cart.findIndex(book => book.id == id);\n};\n\nconst findBookInSFLByIndex = id => {\n  return save_for_later.findIndex(book => book.id == id);\n};\n\nconst saveForLater = id => {\n  let index = findBookInCartByIndex(id);\n\n  if (index != -1) {\n    save_for_later.push(cart[index]);\n    cart.splice(index, 1);\n  }\n};\n\nconst removeFromCart = id => {\n  let index = findBookInCartByIndex(id);\n\n  if (index != -1) {\n    cart.splice(index, 1);\n  }\n};\n\nconst removeFromSFL = id => {\n  let index = findBookInSFLByIndex(id);\n\n  if (index != -1) {\n    save_for_later.splice(index, 1);\n  }\n};\n\nconst backToCart = id => {\n  let sfl_index = findBookInSFLByIndex(id);\n\n  if (sfl_index != -1) {\n    let newBook = save_for_later[sfl_index];\n    newBook.quantity = 1;\n    save_for_later.splice(sfl_index, 1);\n    let cart_index = findBookInCartByIndex(id);\n    cart_index != -1 ? cart[cart_index].quantity++ : cart.push(newBook);\n  }\n};\n\nclass ShoppingCart extends Component {\n  constructor() {\n    super();\n\n    this.handleClick = (id, action) => {\n      this.setState(prevState => ({\n        delete_toggle_on: !prevState.delete_toggle_on\n      }));\n      action == \"delete_cart\" ? removeFromCart(id) : action == \"save_for_later\" ? saveForLater(id) : action == \"delete_SFL\" ? removeFromSFL(id) : backToCart(id);\n    };\n\n    this.displayDeleteButton = (id, action) => {\n      return /*#__PURE__*/React.createElement(Tooltip, {\n        title: \"Delete\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(StyledDeleteButton, {\n        onClick: () => {\n          this.handleClick(id, action);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: delete_logo,\n        alt: \"delete logo\",\n        style: {\n          height: \"30px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 21\n        }\n      })));\n    };\n\n    this.createCart = () => {\n      let items = cart.map((book, index) => ({\n        cover_art: /*#__PURE__*/React.createElement(StyledCoverArt, {\n          src: img_url_prefix + book.img_link,\n          alt: book.title + \" cover art\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 61\n          }\n        }),\n        booktitle: /*#__PURE__*/React.createElement(StyledBookTite, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 33\n          }\n        }, book.title),\n        quantity: book.quantity,\n        price: \"$\" + book.price,\n        delete: this.displayDeleteButton(book.id, \"delete_cart\"),\n        save_for_later: /*#__PURE__*/React.createElement(StyledActionButton, {\n          onClick: () => this.handleClick(book.id, \"save_for_later\"),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 38\n          }\n        }, \"Save For Later\")\n      }));\n      let subtotal = {\n        cover_art: \"\",\n        booktitle: \"\",\n        quantity: \"\",\n        price: \"\",\n        delete: getSubtotal(),\n        save_for_later: /*#__PURE__*/React.createElement(StyledSubtotal, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 119\n          }\n        }, \"Subtotal: \")\n      };\n      items.push(subtotal);\n      return /*#__PURE__*/React.createElement(DataTable, {\n        shadow: 0,\n        style: {\n          width: '800px',\n          fontSize: '16px'\n        },\n        rows: items,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(TableHeader, {\n        name: \"cover_art\",\n        style: {\n          color: \"transparent\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 13\n        }\n      }, \"Cover Art\"), /*#__PURE__*/React.createElement(TableHeader, {\n        name: \"booktitle\",\n        style: {\n          fontSize: \"16px\",\n          minWidth: \"350px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 13\n        }\n      }, \"Book Title\"), /*#__PURE__*/React.createElement(TableHeader, {\n        numeric: true,\n        name: \"quantity\",\n        style: {\n          fontSize: \"16px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 13\n        }\n      }, \"Quantity\"), /*#__PURE__*/React.createElement(TableHeader, {\n        numeric: true,\n        name: \"price\",\n        style: {\n          fontSize: \"16px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 13\n        }\n      }, \"Price\"), /*#__PURE__*/React.createElement(TableHeader, {\n        name: \"save_for_later\",\n        style: {\n          color: \"transparent\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 13\n        }\n      }, \"SFL\"), /*#__PURE__*/React.createElement(TableHeader, {\n        name: \"delete\",\n        style: {\n          color: \"transparent\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 13\n        }\n      }, \"Delete\"));\n    };\n\n    this.createSFL = () => {\n      return /*#__PURE__*/React.createElement(DataTable, {\n        shadow: 0,\n        style: {\n          width: '650px',\n          fontSize: '16px'\n        },\n        rows: save_for_later.map((book, index) => ({\n          cover_art: /*#__PURE__*/React.createElement(StyledCoverArt, {\n            src: img_url_prefix + book.img_link,\n            alt: book.title + \" cover art\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 194,\n              columnNumber: 70\n            }\n          }),\n          booktitle: /*#__PURE__*/React.createElement(StyledBookTite, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 195,\n              columnNumber: 24\n            }\n          }, book.title),\n          price: book.price,\n          delete: this.displayDeleteButton(book.id, \"delete_SFL\"),\n          add_to_cart: /*#__PURE__*/React.createElement(StyledActionButton, {\n            onClick: () => this.handleClick(book.id, \"back_to_cart\"),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 197,\n              columnNumber: 26\n            }\n          }, \"Add To Cart\")\n        })),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(TableHeader, {\n        name: \"cover_art\",\n        style: {\n          color: \"transparent\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 13\n        }\n      }, \"Cover Art\"), /*#__PURE__*/React.createElement(TableHeader, {\n        name: \"booktitle\",\n        style: {\n          fontSize: \"16px\",\n          minWidth: \"350px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 13\n        }\n      }, \"Book Title\"), /*#__PURE__*/React.createElement(TableHeader, {\n        numeric: true,\n        name: \"price\",\n        style: {\n          fontSize: \"16px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 13\n        }\n      }, \"Price\"), /*#__PURE__*/React.createElement(TableHeader, {\n        name: \"add_to_cart\",\n        style: {\n          color: \"transparent\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 13\n        }\n      }, \"BTC\"), /*#__PURE__*/React.createElement(TableHeader, {\n        name: \"delete\",\n        style: {\n          color: \"transparent\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 13\n        }\n      }, \"Delete\"));\n    };\n\n    this.state = {\n      delete_toggle_on: true,\n      save_for_later_toggle_on: true\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        padding: '5px 350px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(StyledShoppingCartTitle, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 10\n      }\n    }, \"Shopping Cart\"), cart.length == 0 ? /*#__PURE__*/React.createElement(\"p1\", {\n      style: {\n        fontSize: \"20px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 31\n      }\n    }, \"Your cart is empty.\") : /*#__PURE__*/React.createElement(this.createCart, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 89\n      }\n    }), save_for_later.length > 0 && /*#__PURE__*/React.createElement(StyledSFLTitle, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 41\n      }\n    }, \"Save For Later\"), save_for_later.length > 0 && /*#__PURE__*/React.createElement(this.createSFL, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 41\n      }\n    }));\n  }\n\n}\n\nexport default ShoppingCart;\nexport { addToCart };","map":{"version":3,"sources":["C:/Users/adrie/Desktop/CEN/CEN4010Group5/frontend/src/components/shoppingcart.js"],"names":["React","Component","useState","DataTable","TableHeader","Textfield","styled","delete_logo","Tooltip","StyledDiv","div","StyledCoverArt","img","StyledDeleteButton","button","StyledActionButton","StyledBookTite","text","StyledShoppingCartTitle","h3","StyledSFLTitle","StyledSubtotal","p","cart","save_for_later","img_url_prefix","addToCart","book","duplicate","findBookInCartByIndex","_id","push","id","img_link","imageLink","title","quantity","price","console","log","getSubtotal","newTotal","index","entries","toFixed","findIndex","findBookInSFLByIndex","saveForLater","splice","removeFromCart","removeFromSFL","backToCart","sfl_index","newBook","cart_index","ShoppingCart","constructor","handleClick","action","setState","prevState","delete_toggle_on","displayDeleteButton","height","createCart","items","map","cover_art","booktitle","delete","subtotal","width","fontSize","color","minWidth","createSFL","add_to_cart","state","save_for_later_toggle_on","render","padding","length"],"mappings":"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","sourcesContent":["import React, { Component, useState } from 'react';\r\nimport {DataTable, TableHeader, Textfield} from 'react-mdl';\r\nimport styled from \"styled-components\";\r\nimport delete_logo from \"./images/delete_bin.png\"\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\n\r\nconst StyledDiv = styled.div`\r\n    margin-left: 400px;`;\r\n\r\nconst StyledCoverArt = styled.img`\r\n    height: 150px;`;\r\n\r\nconst StyledDeleteButton = styled.button`\r\n    background: transparent;\r\n    border: none;`;\r\n\r\nconst StyledActionButton = styled.button`\r\n    background: transparent;\r\n    border-color: blue;\r\n    border-width: thin;\r\n    color: blue;\r\n    text-decoration: underline;`;\r\n\r\nconst StyledBookTite = styled.text`\r\n    white-space: normal;`;\r\n\r\nconst StyledShoppingCartTitle = styled.h3`\r\n    font-variant: all-petite-caps;\r\n    text-decoration: overline;\r\n    color: dimgrey;\r\n    font-size: 40px;\r\n    font-weight: lighter;\r\n    padding-top: 10px;`;\r\n\r\nconst StyledSFLTitle = styled.h3`\r\n    font-variant: all-petite-caps;\r\n    text-decoration: overline;\r\n    color: dimgrey;\r\n    font-size: 28px;\r\n    font-weight: lighter;`;\r\n\r\nconst StyledSubtotal = styled.p`\r\n    color: rgba(0, 0, 0, 0.54);\r\n    font-size: 20px;\r\n    text-transform: uppercase;\r\n    margin: unset;`;\r\n\r\nconst cart = [];\r\nconst save_for_later = [];\r\nconst img_url_prefix = 'https://raw.githubusercontent.com/benoitvallon/100-best-books/master/static/';\r\n\r\n/* Add a book to the shopping cart */\r\nconst addToCart = book =>\r\n{   \r\n    //if (book == null){return;}\r\n    let duplicate = findBookInCartByIndex(book._id);           // Find index of possible duplicate\r\n    if (duplicate == -1)        // No duplicate present\r\n    {\r\n        cart.push({id: book._id, img_link: book.imageLink, title: book.title, quantity: 1, price: book.price});\r\n    }\r\n    else                        // Duplicate present\r\n    {\r\n        cart[duplicate].quantity++;\r\n    }\r\n    console.log(cart);\r\n}\r\n\r\n/* Calculate and update cart's subtotal */\r\nconst getSubtotal = () =>     \r\n{\r\n    let newTotal = 0;\r\n    for (const [index, book] of cart.entries())\r\n    {\r\n        newTotal += (book.price * book.quantity);\r\n    }\r\n    return <StyledSubtotal>${newTotal.toFixed(2)}</StyledSubtotal>;\r\n}\r\n\r\n/* \r\n    Find book in cart by book id and return the book's index if the id is found.\r\n    Otherwise, return -1\r\n*/\r\nconst findBookInCartByIndex = id =>\r\n{\r\n    return cart.findIndex(book => book.id == id);\r\n}\r\n\r\nconst findBookInSFLByIndex = id =>\r\n{\r\n    return save_for_later.findIndex(book => book.id == id);\r\n}\r\n\r\nconst saveForLater = id =>\r\n{\r\n    let index = findBookInCartByIndex(id);\r\n    if (index != -1)\r\n    {\r\n        save_for_later.push(cart[index]);\r\n        cart.splice(index, 1);\r\n    }\r\n}\r\n\r\nconst removeFromCart = id =>\r\n{\r\n    let index = findBookInCartByIndex(id);\r\n    if (index != -1)\r\n    {\r\n        cart.splice(index, 1);\r\n    }\r\n}\r\n\r\nconst removeFromSFL = id =>\r\n{\r\n    let index = findBookInSFLByIndex(id);\r\n    if (index != -1)\r\n    {\r\n        save_for_later.splice(index, 1);\r\n    }\r\n}\r\n\r\nconst backToCart = id =>\r\n{\r\n    let sfl_index = findBookInSFLByIndex(id);\r\n    if (sfl_index != -1)\r\n    {\r\n        let newBook = save_for_later[sfl_index];\r\n        newBook.quantity = 1;\r\n        save_for_later.splice(sfl_index, 1);\r\n\r\n        let cart_index = findBookInCartByIndex(id);\r\n        (cart_index != -1) ? cart[cart_index].quantity++ : cart.push(newBook);  \r\n    }\r\n}\r\n\r\nclass ShoppingCart extends Component\r\n{\r\n    constructor(){\r\n        super();\r\n        this.state = {\r\n            delete_toggle_on: true,\r\n            save_for_later_toggle_on: true\r\n        }\r\n    }\r\n\r\n    handleClick = (id, action) =>\r\n    {\r\n        this.setState(prevState => ({delete_toggle_on: !prevState.delete_toggle_on}));\r\n        (action == \"delete_cart\") ? removeFromCart(id) : \r\n        (action == \"save_for_later\") ? saveForLater(id) : \r\n        (action == \"delete_SFL\") ? removeFromSFL(id) : backToCart(id);\r\n    }\r\n\r\n    displayDeleteButton = (id, action) =>\r\n    {\r\n        return( \r\n            <Tooltip title=\"Delete\">\r\n                <StyledDeleteButton onClick={() => {this.handleClick(id, action)}}>\r\n                    <img src={delete_logo} alt=\"delete logo\" style={{height: \"30px\"}} />\r\n                </StyledDeleteButton>\r\n            </Tooltip>);\r\n    }\r\n\r\n    createCart = () => \r\n    {\r\n        let items =  cart.map((book, index) => ({cover_art: <StyledCoverArt src = {img_url_prefix + book.img_link} alt = {book.title + \" cover art\"} />,\r\n                     booktitle: <StyledBookTite>{book.title}</StyledBookTite>, quantity: book.quantity, price: \"$\" + book.price, \r\n                     delete: this.displayDeleteButton(book.id, \"delete_cart\"), \r\n                     save_for_later: <StyledActionButton onClick={() => this.handleClick(book.id, \"save_for_later\")}>Save For Later</StyledActionButton>}));\r\n        let subtotal = {cover_art: \"\", booktitle: \"\", quantity: \"\", price: \"\", delete: getSubtotal(), save_for_later: <StyledSubtotal>Subtotal: </StyledSubtotal>};\r\n        items.push(subtotal);\r\n\r\n        return (\r\n        <DataTable\r\n            shadow={0}\r\n            style={{width: '800px', fontSize: '16px'}}\r\n            rows = {items}\r\n        >\r\n            <TableHeader name=\"cover_art\" style={{color: \"transparent\"}}>Cover Art</TableHeader>\r\n            <TableHeader name=\"booktitle\" style={{fontSize: \"16px\", minWidth: \"350px\"}}>Book Title</TableHeader>\r\n            <TableHeader numeric name=\"quantity\" style={{fontSize: \"16px\"}}>Quantity</TableHeader>\r\n            <TableHeader numeric name=\"price\" style={{fontSize: \"16px\"}}>Price</TableHeader>\r\n            <TableHeader name=\"save_for_later\" style={{color: \"transparent\"}}>SFL</TableHeader>\r\n            <TableHeader name=\"delete\" style={{color: \"transparent\"}}>Delete</TableHeader>\r\n        </DataTable>\r\n        );\r\n    }\r\n\r\n    createSFL = () =>\r\n    {\r\n        return(\r\n        <DataTable\r\n            shadow={0}\r\n            style={{width: '650px', fontSize: '16px'}}\r\n            rows = {save_for_later.map((book, index) => ({cover_art: <StyledCoverArt src = {img_url_prefix + book.img_link} alt = {book.title + \" cover art\"} />,\r\n            booktitle: <StyledBookTite>{book.title}</StyledBookTite>, price: book.price, \r\n            delete: this.displayDeleteButton(book.id, \"delete_SFL\"), \r\n            add_to_cart: <StyledActionButton onClick={() => this.handleClick(book.id, \"back_to_cart\")}>Add To Cart</StyledActionButton>}))}\r\n        >\r\n            <TableHeader name=\"cover_art\" style={{color: \"transparent\"}}>Cover Art</TableHeader>\r\n            <TableHeader name=\"booktitle\" style={{fontSize: \"16px\", minWidth: \"350px\"}}>Book Title</TableHeader>\r\n            <TableHeader numeric name=\"price\" style={{fontSize: \"16px\"}}>Price</TableHeader>\r\n            <TableHeader name=\"add_to_cart\" style={{color: \"transparent\"}}>BTC</TableHeader>\r\n            <TableHeader name=\"delete\" style={{color: \"transparent\"}}>Delete</TableHeader>\r\n        </DataTable>\r\n        );\r\n    }\r\n\r\n    render() {\r\n    return(\r\n        <div style={{padding: '5px 350px'}}>\r\n         <StyledShoppingCartTitle>Shopping Cart</StyledShoppingCartTitle>\r\n        {(cart.length == 0) ? <p1 style={{fontSize: \"20px\"}}>Your cart is empty.</p1> : <this.createCart/>}\r\n        {(save_for_later.length > 0) && <StyledSFLTitle>Save For Later</StyledSFLTitle>}\r\n        {(save_for_later.length > 0) && <this.createSFL/>}\r\n        </div>\r\n    )}\r\n}\r\n\r\nexport default ShoppingCart;\r\nexport {addToCart};"]},"metadata":{},"sourceType":"module"}